var u=class{options;constructor(a){this.options=a,document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{this.initializeThemex(),this.setupEventListeners()}):(this.initializeThemex(),this.setupEventListeners())}getDefaultValue(a){return this.options.find(e=>e.key===a)?.default}initializeThemex(){this.options.forEach(({key:a,default:l})=>{let e=localStorage.getItem(a);console.log(e);let t=e||l;t&&(this.applyThemex(a,t),this.updateUI(a,t))})}setupEventListeners(){document.querySelectorAll('input[type="checkbox"][data-themex-key][data-themex-value]').forEach(a=>{a.addEventListener("change",l=>{let e=l.target,t=e.dataset.themexKey,n=e.dataset.themexValue;if(t&&n)if(e.checked)this.applyThemex(t,n),this.updateUI(t,n);else{let o=this.getDefaultValue(t);o?(this.applyThemex(t,o),this.updateUI(t,o)):(this.removeThemex(t),this.updateUI(t,""))}})}),document.querySelectorAll("label[data-themex-key]").forEach(a=>{a.addEventListener("change",l=>{let e=a.dataset.themexKey,t=a.dataset.themexValue;a.querySelectorAll('input[type="checkbox"]').forEach(n=>{if(e&&t)if(n.checked)this.applyThemex(e,t),this.updateUI(e,t);else{let o=this.getDefaultValue(e);o?(this.applyThemex(e,o),this.updateUI(e,o)):(this.removeThemex(e),this.updateUI(e,""))}})})}),document.querySelectorAll("select[data-themex-key]").forEach(a=>{a.addEventListener("change",l=>{let e=l.target,t=e.dataset.themexKey,n=e.value;this.applyThemex(t,n),this.updateUI(t,n)})}),document.querySelectorAll("button[data-themex-key]").forEach(a=>{a.addEventListener("click",l=>{let e=l.currentTarget,t=e.dataset.themexKey,n=e.dataset.themexValue;n&&(this.applyThemex(t,n),this.updateUI(t,n))})}),document.querySelectorAll('div[role="button"][data-themex-key]').forEach(a=>{a.addEventListener("click",l=>{let e=l.currentTarget,t=e.dataset.themexKey,n=e.dataset.themexValue;n&&(this.applyThemex(t,n),this.updateUI(t,n))})}),document.querySelectorAll("a[data-themex-key]").forEach(a=>{a.addEventListener("click",l=>{let e=l.currentTarget,t=e.dataset.themexKey,n=e.dataset.themexValue;t&&n&&(this.applyThemex(t,n),this.updateUI(t,n))})}),document.querySelectorAll('input[type="radio"][data-themex-key]').forEach(a=>{a.addEventListener("change",l=>{let e=l.target,t=e.dataset.themexKey,n=e.dataset.themexValue;e.checked&&t&&n&&(this.applyThemex(t,n),this.updateUI(t,n))})}),document.querySelectorAll('input[type="range"][data-themex-key]').forEach(a=>{a.addEventListener("change",l=>{let e=l.target,t=e.dataset.themexKey;if(t){let n=e.value;this.applyThemex(t,n),this.updateUI(t,n)}})})}applyThemex(a,l){localStorage.setItem(a,l),document.documentElement.setAttribute(`data-${a}`,l)}removeThemex(a){localStorage.removeItem(a),document.documentElement.removeAttribute(`data-${a}`)}updateUI(a,l){document.querySelectorAll(`input[type="checkbox"][data-themex-key="${a}"]`).forEach(e=>{let t=e.dataset.themexValue;t&&(e.checked=l===t)}),document.querySelectorAll(`label[data-themex-key="${a}"]`).forEach(e=>{let t=e.dataset.themexValue;e.querySelectorAll('input[type="checkbox"]').forEach(n=>{t&&(n.checked=l===t)})}),document.querySelectorAll(`button[data-themex-key="${a}"][set]`).forEach(e=>{let n=e.dataset.themexValue===l;e.setAttribute("aria-current",n.toString())}),document.querySelectorAll(`div[role="button"][data-themex-key="${a}"][set]`).forEach(e=>{let n=e.dataset.themexValue===l;e.setAttribute("aria-current",n.toString())}),document.querySelectorAll(`button[data-themex-key="${a}"][toggle]`).forEach(e=>{let n=e.dataset.themexValue===l;e.setAttribute("aria-pressed",n.toString())}),document.querySelectorAll(`div[role="button"][data-themex-key="${a}"][toggle]`).forEach(e=>{let n=e.dataset.themexValue===l;e.setAttribute("aria-pressed",n.toString())}),document.querySelectorAll(`select[data-themex-key="${a}"]`).forEach(e=>{e.value=l,e.querySelectorAll("option").forEach(n=>{n.removeAttribute("data-selected")});let t=e.querySelector(`option[value="${l}"]`);t&&t.setAttribute("data-selected","true")}),document.querySelectorAll(`input[type="radio"][data-themex-key="${a}"]`).forEach(e=>{let t=e.dataset.themexValue;t&&(e.checked=t===l)}),document.querySelectorAll(`input[type="range"][data-themex-key="${a}"]`).forEach(e=>{e.value=l})}},s=u;export{s as Themex};
//# sourceMappingURL=index.esm.min.js.map
